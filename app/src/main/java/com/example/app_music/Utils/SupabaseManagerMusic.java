package com.example.app_music.Utils;

import android.util.Log;

import org.json.JSONArray;
import org.json.JSONObject;

/**
 * üéµ SupabaseManagerMusic
 * Qu·∫£n l√Ω API b√†i h√°t v√† th·ªÉ lo·∫°i nh·∫°c
 */
public class SupabaseManagerMusic {

    // üßæ L·∫•y to√†n b·ªô b√†i h√°t
    public static JSONArray getAllSongs() {
        try {
            String response = SupabaseManager.makeRequest(SupabaseManager.SONGS_URL, "GET", null);
            return new JSONArray(response);
        } catch (Exception e) {
            Log.e(SupabaseManager.TAG, "GetAllSongs error", e);
            return null;
        }
    }

    // üéß L·∫•y b√†i h√°t theo th·ªÉ lo·∫°i
    public static JSONArray getSongsByCategory(String category) {
        try {
            String url = SupabaseManager.SONGS_URL + "?category=eq." + category;
            String response = SupabaseManager.makeRequest(url, "GET", null);
            return new JSONArray(response);
        } catch (Exception e) {
            Log.e(SupabaseManager.TAG, "GetSongsByCategory error", e);
            return null;
        }
    }

    // ‚ûï Th√™m b√†i h√°t m·ªõi
    public static boolean addSong(String title, String artist, String category, String urlMusic) {
        try {
            JSONObject json = new JSONObject();
            json.put("title", title);
            json.put("artist", artist);
            json.put("category", category);
            json.put("url", urlMusic);

            String response = SupabaseManager.makeRequest(SupabaseManager.SONGS_URL, "POST", json);
            Log.d(SupabaseManager.TAG, "Add song response: " + response);
            return true;

        } catch (Exception e) {
            Log.e(SupabaseManager.TAG, "AddSong error", e);
            return false;
        }
    }
}
